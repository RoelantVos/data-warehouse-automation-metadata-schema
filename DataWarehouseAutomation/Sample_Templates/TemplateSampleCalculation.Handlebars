--Example using a query as a source rather than an attribute.
{{#each dataObjectMappings }}

{{#if mappingName}}
--Working on {{mappingName}}.
{{else}}
--No mapping name is defined.
{{/if}}

SELECT

{{#each dataItemMappings}}
  {{#each sourceDataItems}}
    {{#if dataQueryCode}}
    -- This is the data query logic
    {{dataQueryCode}} as {{../targetDataItem.name}}{{else}}
    -- This is the item, with brackets added using a custom extension
    {{stringwrap name "[" "]"}} as {{../targetDataItem.name}}
    {{/if}}{{/each}}{{#unless @last}},{{/unless}}
  {{/each}}
FROM {{targetDataObject.name}}
{{/each}}